<div class="wrapper-xs" ng-controller="gpsDismantledController" ng-init="app.settings.headerFixed = false;">
    <div class="panel panel-default">
        <div class="panel-heading font-bold">设备拆除</div>
        <div class="panel-body">
            <toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}"></toaster-container>
            <form name="formQuery" class="form-validation" novalidate>
                <div class="form-group">
                    <label>安装订单号(申请编号)：</label>
                    <input type="text" name="orderId" class="form-control" placeholder="请输入安装订单号(申请编号)" ng-model="applyNum" ng-minlength="1"  ng-change="refresh()" required>
                      <span style="color: red" ng-show="formQuery.orderId.$invalid">
                          <span ng-show="formQuery.orderId.$error.minlength">*请输入安装订单号(申请编号)</span>
                      </span>
                </div>
                <div class="form-group">
                    <label>车架号后6位：</label>
                    <input type="text" name="deviceVin" class="form-control" placeholder="请输入车架号后6位" ng-model="vin" ng-pattern="/^[0-9]{6}$/" ng-maxlength="6" ng-minlength="6" ng-blur = "selectName()" ng-change="refresh()" required>
                    <span style="color: red" ng-show="formQuery.deviceVin.$invalid">
                        <span ng-show="formQuery.deviceVin.$error.pattern">*请正确输入车架号后6位数字</span>
                    </span>
                </div>
                <div class="form-group">
                    <label>车主姓名：</label>
                    <input type="text" name="carOwnerName" class="form-control" placeholder="请选择车主姓名" ng-model="device.carOwnerName" ng-minlength="1"  ng-readonly="true" ng-change="refresh()" required>
                    <span style="color: red" ng-show="formQuery.carOwnerName.$invalid">
                     <span ng-show="formQuery.carOwnerName.$error.minlength">*请选择车主姓名</span>
                    </span>
                </div>
                <div class="form-group">
                    <label>SIM卡号：</label>
                    <input type="text" name="simCardNum" class="form-control" placeholder="请输入11位或13位sim卡号" ng-model="simCode" ng-pattern="/(^\d{11}$)|(^\d{13}$)/" ng-change="refresh()" required>
                    <span style="color: red" ng-show="formQuery.simCardNum.$invalid">
                        <span ng-show="formQuery.simCardNum.$error.pattern">*请输入11位或13位SIM卡号</span>
                    </span>
                </div>
                <button class="btn btn-primary w-full m-b" ng-click="query()" ng-disabled="formQuery.$invalid">
                    获取信息
                </button>
            </form>

            <ul class="list-group no-borders" ng-model="task" ng-if="task != null">
                <li class="list-group-item" style="padding:2px">
                    SIM卡号：{{task.simCode}}
                </li>
                <li class="list-group-item" style="padding:2px">
                    设备类型：{{task.type}}
                </li>
                <li class="list-group-item" style="padding:2px">
                    车架号：{{task.vin}}
                </li>
                <li class="list-group-item" style="padding:2px">
                    安装人员：{{task.installPerson.name}}
                </li>
                <li class="list-group-item" style="padding:2px">
                    安装人员联系电话：{{task.installPerson.phoneNum}}
                </li>
                <li class="list-group-item " style="padding:2px">
                    安装时间：{{task.installTime | date: 'yyyy-MM-dd HH:mm:ss'}}
                </li>
                <li class="list-group-item " style="padding:2px">
                    安装地点：{{task.addr}}
                </li>
                <li class="list-group-item" style="padding:2px">
                    安装师傅属性：{{task.installPerson.providerProperty}}
                </li>
            </ul>

            <form name="form" class="form-validation" novalidate>
                <div class="form-group">
                    <label>拆除原因：</label>
                    <textarea class="form-control" name="reason" ng-model="dismantle.dismantleReason" required></textarea>
                </div>
                <button class="btn btn-primary w-full" ng-click="submit()" ng-disabled="form.$invalid">
                    提交待审核
                </button>
            </form>
        </div>
    </div>
</div>